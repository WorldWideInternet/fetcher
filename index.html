<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fetch Content</title>
  <style>
    #fetchedContent {
      width: 100%;
      height: 100vh;
      border: none;
    }
  </style>
</head>
<body>
  <div id="fetchedContent">
    <!-- Fetched content will be inserted here -->
  </div>

  <script>
    // Prompt the user for a URL
    const url = prompt("Enter the URL");

    // Validate the URL (check if it's not empty)
    if (url.trim() !== "") {
      // Fetch the HTML content
      fetch(url)
        .then(response => {
          if (!response.ok) {
            throw new Error('Network response was not ok');
          }
          return response.text();
        })
        .then(html => {
          // Create a new HTML document
          const doc = document.implementation.createHTMLDocument();
          doc.documentElement.innerHTML = html;

          // Fetch and replace resources (images, CSS, JavaScript)
          const fetchResources = async () => {
            const fetchAndReplace = async (element, attr) => {
              const url = element.getAttribute(attr);
              if (url) {
                try {
                  const response = await fetch(url);
                  const data = await response.text();
                  const replacement = document.createElement(element.tagName);
                  replacement[attr] = URL.createObjectURL(new Blob([data], { type: response.headers.get('content-type') }));
                  element.replaceWith(replacement);
                } catch (error) {
                  console.error(`Error fetching ${attr}:`, error);
                }
              }
            };

            // Fetch and replace images
            const images = doc.querySelectorAll('img');
            images.forEach(img => fetchAndReplace(img, 'src'));

            // Fetch and replace CSS files
            const links = doc.querySelectorAll('link[rel="stylesheet"]');
            links.forEach(link => fetchAndReplace(link, 'href'));

            // Fetch and replace JavaScript files
            const scripts = doc.querySelectorAll('script[src]');
            scripts.forEach(script => fetchAndReplace(script, 'src'));
          };

          // Execute fetchResources function and display the fetched content
          fetchResources().then(() => {
            document.getElementById('fetchedContent').appendChild(doc.documentElement);
          });
        })
        .catch(error => {
          console.error('There was a problem with the fetch operation:', error);
          document.getElementById('fetchedContent').textContent = 'Failed to fetch content. Please check the URL and try again.';
        });
    } else {
      console.error('Invalid URL');
    }
  </script>
</body>
</html>
